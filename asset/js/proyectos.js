const proyectosPropios = [
  {
    numero: "PC1419/2024",
    fecha: "16-10-2024",
    estado: "ingresado",
    area: "Seguridad  y Justicia",
    tema: "datos genéticos",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=1419&a=2024",
    resumen:
      "Al Poder Ejecutivo, Ministerio de Seguridad y Justicia, que vería con agrado suscriba un convenio con el Registro Nacional de Datos Genéticos, para posibilitar su utilización por parte del fuero y los ministerios públicos provinciales.",
  },
  {
    numero: "PI1389/2024",
    fecha: "10-10-2024",
    estado: "ingresado",
    area: "Salud",
    tema: "medicina de emergencia",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=1389&a=2024",
    resumen:
      "Al Poder Ejecutivo, Ministerio de Salud, referido al Sistema Integral de Atención Rionegrina de Medicina de Emergencias -SIARME-.",
  },
  {
    numero: "PC1208/2024",
    fecha: "12-09-2024",
    estado: "ingresado",
    area: "Asuntos económicos",
    tema: "eliminación de tasas",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=1208&a=2024",
    resumen:
      "Al Poder Ejecutivo, que arbitre los medios necesarios para que el Ministerio de Hacienda, a través de la Agencia de Recaudación Tributaria, derogue todo régimen de percepción de tributos o tasas provinciales que se apliquen y/o trasladen con la facturación realizada por bienes o servicios, y sea ajeno a la naturaleza de los mismos.",
  },
  {
    numero: "PC1131/2024",
    fecha: "28-08-2024",
    estado: "aprobado",
    area: "Asuntos económicos",
    tema: "eliminación IIBB",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=1042&a=2024",
    resumen:
      "Al Poder Ejecutivo, que arbitre los medios necesarios para que la Agencia de Recaudación Tributaria derogue todo régimen de retención del Impuesto sobre los Ingresos Brutos que resulte aplicable a los pagos realizados a los contribuyentes por parte de los sistemas de administración de tarjetas de crédito, de compra y/o pago y/o débito, y/o de servicios electrónicos de pagos y/o cobranzas por cuenta y orden de terceros, desde el 1 de septiembre de 2024.",
  },
  {
    numero: "PL1042/2024",
    fecha: "14-08-2024",
    estado: "aprobado",
    area: "Asuntos económicos",
    tema: "blanqueo de activos",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=1042&a=2024",
    resumen:
      "Se adhiere al Régimen de regularización de Activos no registrados, establecido en el Título II de la ley nacional nº 27743. Busca mejorar la base tributaria y potenciar la reactivación económica. El proyecto que finalmente fue aprobado pertenece al PE, es similar en el objetivo y no requirió debate en segunda vuelta.",
  },
  {
    numero: "PI996/2024",
    fecha: " 08-08-2024",
    estado: "ingresado",
    area: "Asuntos económicos",
    tema: "gasoducto patagónico",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=996&a=2024",
    resumen:
      "Al Poder Ejecutivo, referido a las obras de ampliación de la capacidad de transporte del Gasoducto Patagónico.",
  },
  {
    numero: "PL950/2024",
    fecha: "01/08/2024",
    estado: "ingresado",
    area: "Administración-Estado",
    tema: "Información pública",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=950&a=2024",
    resumen:
      "Garantizar el libre acceso a las respuestas de los pedidos de informe, colaborando con la buscada “despapelización” y con la transformación digital y la simplificación de trámites.",
  },
  {
    numero: "PL869/2024",
    fecha: "10/07/2024",
    estado: "ingresado",
    area: "Administración-Estado",
    tema: "Información pública",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=869&a=2024",
    resumen:
      'Sustituye los artículos 2º y 18 de la ley A nº 2938 -Procedimiento Administrativo de Río Negro. En concordancia con la Ley Bases, adecua el procedimiento adminstrativo, evitando la sobregarga burocrática, e implementa el "silencio positivo", que permite obtener resultados efectivos de los trámites frente a la pasividad del Estado.',
  },
  {
    numero: "PL773/24",
    fecha: "19/06/2024",
    estado: "ingresado",
    area: "Seguridad - Justicia",
    tema: "reiterancia delictiva",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=773&a=2024",
    resumen:
      'Incorpora los conceptos de "reiterancia delictiva" y "peligrosidad procesal" a la ley P nº 5020 -Código Procesal Penal, ',
  },
  {
    numero: "PC772/24",
    fecha: "19/06/2024",
    estado: "ingresado",
    area: "Educación-Cultura-Soberanía",
    tema: "nuestras banderas",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=772&a=2024",
    resumen:
      "Su enérgico repudio a la realización de cualquier acto de Promesa de Lealtad a una bandera distinta de la Bandera Nacional en las escuelas",
  },
  {
    numero: "PC771/24",
    fecha: "19/06/2024",
    estado: "ingresado",
    area: "Educación-Cultura-Soberanía",
    tema: "nuestras banderas",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=771&a=2024",
    resumen:
      "Al Poder Ejecutivo, Ministerio de Educación y Derechos Humanos, que prohíba la celebración de cualquier acto de promesa a banderas distintas de la Bandera Argentina",
  },
  {
    numero: "PC758/24",
    fecha: "18/06/2024",
    estado: "ingresado",
    area: "Educación-Obras públicas",
    tema: "escuelas públicas",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=758&a=2024",
    resumen:
      "Al Poder Ejecutivo y al Ministerio de Educación y Derechos Humanos, que realicen con urgencia las tareas de mantenimiento necesarias para poner en funcionamiento las calderas de la Escuela Secundaria Río Negro -ESRN- nº 46 de San Carlos de Bariloche; y al Ministerio de Obras y Servicios Públicos, que inicie las obras de ampliación y refacción de los sanitarios de ese establecimiento",
  },
  {
    numero: "PC757/24",
    fecha: "18/06/2024",
    estado: "ingresado",
    area: "Seguridad",
    tema: "fin a sumarios policías",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=757&a=2024",
    resumen:
      "Al Poder Ejecutivo, al Ministerio de Seguridad y Justicia y a la Policía de Río Negro, que concluya los sumarios administrativos iniciados a efectivos policiales en noviembre y diciembre de 2023",
  },
  {
    numero: "PI753/24",
    fecha: "18/06/2024",
    estado: "tratado",
    area: "Educación-Obras públicas",
    tema: "escuelas públicas",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=753&a=2024",
    resumen:
      "Al Poder Ejecutivo, Ministerio de Educación y Derechos Humanos, referido a la reparación de la caldera de la Escuela Secundaria Río Negro -ESRN- nº 46 de la ciudad de San Carlos de Bariloche",
  },
  {
    numero: "PI752/24",
    fecha: "18/06/2024",
    estado: "tratado",
    area: "Educación-Obras públicas",
    tema: "escuelas públicas",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=752&a=2024",
    resumen:
      "Al Poder Ejecutivo, Ministerio de Obras y Servicios Públicos, referido a la licitación para la refacción y ampliación de los sanitarios de la Escuela Secundaria Río Negro -ESRN- nº 46 de la ciudad de San Carlos de Bariloche",
  },
  {
    numero: "PI751/24",
    fecha: "18/06/2024",
    estado: "ingresado",
    area: "Economía-Finanzas",
    tema: "gasto público",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=751&a=2024",
    resumen:
      "Al Poder Ejecutivo, referido a los bienes muebles de la provincia, compras efectuadas durante el período 2020-2024 y contrataciones realizadas, entre otros",
  },
  {
    numero: "PL695/24",
    fecha: "06/06/2024",
    estado: "ingresado",
    area: "Cultura-Educación-Seguridad Interior",
    tema: "nuestras banderas",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=695&a=2024",
    resumen:
      '"Nuestras Banderas". Establece que las únicas y exclusivas banderas que están autorizadas a ser exhibidas y flamear en todos los edificios públicos de la Provincia de Río Negro son las banderas nacional y provincial, y la bandera municipal en caso de existir',
  },
  {
    numero: "PI451/24",
    fecha: "23/04/2024",
    estado: "tratado",
    area: "Medio Ambiente",
    tema: "contaminación lago",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=451&a=2024",
    resumen:
      "Al Poder Ejecutivo, Secretaría de Energía y Ambiente, Departamento Provincial de Aguas -DPA-, referido a la periodicidad con la que monitorean la calidad del agua del lago Nahuel Huapi y resultados físico-químicos y bacteriológicos del espejo de agua, avance de Plan Director Cloacal, ruidos y olores molestos, astreintes judiciales",
  },
  {
    numero: "PI449/24",
    fecha: "23/04/2024",
    estado: "tratado",
    area: "Educación-Obras públicas",
    tema: "escuela oeste bariloche",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=449&a=2024",
    resumen:
      "Al Poder Ejecutivo, Ministerio de Educación y Derechos Humanos, referido a los fondos de la partida asignada en el Presupuesto 2023 destinada a la creación de una Escuela Secundaria Río Negro -ESRN- en el predio de la Escuela Primaria nº 48 de la ciudad de San Carlos de Bariloche",
  },
  {
    numero: "PL447/24",
    fecha: "23/04/2024",
    estado: "ingresado",
    area: "Salud",
    tema: "no más cautivos IPROSS",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=447&a=2024",
    resumen:
      "Libre elección de Obras Sociales para empleados públicos. Modifica la ley K nº 2753 -Instituto Provincial del Seguro de Salud -IProSS",
  },
  {
    numero: "PC446/24",
    fecha: "23/04/2024",
    estado: "ingresado",
    area: "Economía - Agro",
    tema: "protección agro",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=446&a=2024",
    resumen:
      "Al Poder Ejecutivo, que vería con agrado se dirija a los Poderes Ejecutivo y Legislativo Nacional a fin de solicitarles la adhesión de la República Argentina al Convenio Internacional para la Protección de las Obtenciones Vegetales -UPOV- Acta 1991",
  },
  {
    numero: "PL357/24",
    fecha: "05/04/2024",
    estado: "ingresado",
    area: "Administración-Estado",
    tema: "Información pública",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=357&a=2024",
    resumen:
      'Incorpora el artículo 99 "Título IX-Acceso Público Permanente" y modifica el inciso c- del artículo 85 de la ley H nº 3186 de Administración Financiera y Control Interno del Sector Público Provincial',
  },
  {
    numero: "PC356/24",
    fecha: "05/04/2024",
    estado: "ingresado",
    area: "Educación",
    tema: "escuela oeste bariloche",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=356&a=2024",
    resumen:
      "Al Ministerio de Educación y Derechos Humanos, la necesidad de asignar un Código Único Escolar -CUE- para la escuela secundaria cuya construcción está prevista en el km. 20 de la Avenida Ezequiel Bustillo de la ciudad de San Carlos de Bariloche",
  },
  {
    numero: "PC244/24",
    fecha: "12/03/2024",
    estado: "aprobado",
    area: "Seguridad",
    tema: "cuidar a roca",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=244&a=2024",
    resumen:
      "Al Ministerio de Seguridad y Justicia, la necesidad de realizar las gestiones necesarias con la Municipalidad de la ciudad de San Carlos de Bariloche y su Centro de Monitoreo, para la protección del monumento de Julio Argentino Roca ubicado en el Centro Cívico de esa ciudad",
  },
  {
    numero: "PD230/24",
    fecha: "08/03/2024",
    estado: "ingresado",
    area: "Seguridad",
    tema: "cuidar a roca",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=230&a=2024",
    resumen:
      "Su enérgico repudio a los hechos de vandalismo ocurridos el 7 de marzo de 2024 sobre el monumento de Julio Argentino Roca en el Centro Cívico de la ciudad de San Carlos de Bariloche",
  },
  {
    numero: "PL211/24",
    fecha: "06/03/2024",
    estado: "ingresado",
    area: "Justicia",
    tema: "Información pública",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=211&a=2024",
    resumen:
      "Garantiza a los ciudadanos que acudan a las Comisarías de la Policía de la Provincia de Río Negro, el debido acceso a la información atinente a sus derechos y garantías",
  },
  {
    numero: "PL196/24",
    fecha: "06/03/2024",
    estado: "ingresado",
    area: "Medio Ambiente",
    tema: "reducción de plásticos",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=196&a=2024",
    resumen: "Ley de Reducción de Plásticos de único uso",
  },
  {
    numero: "PL115/24",
    fecha: "19/02/2024",
    estado: "ingresado",
    area: "Economía-Defensa del Consumidor",
    tema: "responsabilidad fiscal",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=115&a=2024",
    resumen:
      "Transparencia Fiscal al Consumidor. Establece la obligatoriedad de indicar dentro de las facturas o tickets de compra que recibe el consumidor, los impuestos provinciales incluidos en ellos. En el caso excepcional de imposibilidad de desglose, se indicará el porcentaje aproximado de incidencia sobre el precio final",
  },
  {
    numero: "PC72/24",
    fecha: "07/02/2024",
    estado: "aprobado",
    area: "Relaciones Internacionales",
    tema: "paso cardenal samoré",
    enlace:
      "https://web.legisrn.gov.ar/legislativa/proyectos/ver?c=P&n=72&a=2024",
    resumen: "Extensión horaria del Paso Cardenal Samoré en verano",
  },
];

const destacados = proyectosPropios.filter(
  (proyecto) =>
    proyecto.tema.includes("reiterancia") ||
    proyecto.tema.includes("cautivos") ||
    proyecto.resumen.includes("Plásticos")
);

document.addEventListener("DOMContentLoaded", () => {
  imprimirProyectos(proyectosPropios);
  imprimirDestacados();
});

let temaProyectos = document.querySelector("#temas");
temaProyectos.addEventListener("change", () => {
  if (temaProyectos.value === "") {
    imprimirProyectos(proyectosPropios);
    console.log(proyectosPropios);
  } else {
    const proyectosFiltrados = proyectosPropios.filter(
      (proy) => proy.tema === temaProyectos.value
    );
    //console.log(proyectosFiltrados);
    imprimirProyectos(proyectosFiltrados);
  }
});

// FUNCIONES
const contenedorProyectos = document.querySelector(".proyectos_propios");

function imprimirProyectos(listado) {
  contenedorProyectos.innerHTML = "";

  let i = 0;
  while (i < 8) {
    let color = "";
    switch (listado[i].estado) {
      case "tratado":
        color = "tratado";

        break;
      case "aprobado":
        color = "aprobado";
        break;
      case "rechazado":
        color = "rechazado";
        break;
      case "ingresado":
        color = "ingresado";
        break;
      default:
        break;
    }

    const card = document.createElement("div");
    card.classList.add("registro");
    card.setAttribute("id", listado[i].numero);
    card.innerHTML = `
        <div class="data">
            <p class="area">${listado[i].area}</p>
            <p class="tema">${listado[i].tema}</p>
        </div>
        <div class="data">
            <div class="tags">
                <p class="numero">${listado[i].numero}  <a href="${listado[i].enlace}"><i class="fa-solid fa-arrow-up-right-from-square"></i></a></p>
                <p class="fecha">${listado[i].fecha}</p>
                <p class="avance ${color}">${listado[i].estado}</p>
            </div>
            <div class="resumen">
                <p>${listado[i].resumen}</p>  
            </div>
        </div>
        `;

    i++;
    contenedorProyectos.appendChild(card);
  }

  const mostrarMas = document.createElement("p");
  mostrarMas.textContent = "Mostrar más";
  mostrarMas.classList.add("ancor");
  contenedorProyectos.appendChild(mostrarMas);

  mostrarMas.addEventListener("click", () => {
    mostrarMas.remove();
    mostrarMasProyectos(listado);
  });

  const countProyectos = listado.length;
  document.querySelector("#countProyectos").textContent = countProyectos;
}

function mostrarTodo() {
  imprimirProyectos(proyectosPropios);
  const mostrarMas = contenedorProyectos.querySelector(".ancor");
  mostrarMas.remove();
  mostrarMasProyectos(proyectosPropios);
}

function mostrarMasProyectos(listado) {
  let i = 8;
  while (i < listado.length) {
    let color = "";
    switch (listado[i].estado) {
      case "tratado":
        color = "tratado";

        break;
      case "aprobado":
        color = "aprobado";
        break;
      case "rechazado":
        color = "rechazado";
        break;
      case "ingresado":
        color = "ingresado";
        break;
      default:
        break;
    }

    const card = document.createElement("div");
    card.classList.add("registro");
    card.setAttribute("id", listado[i].numero);
    card.innerHTML = `
        <div class="data">
            <p class="area">${listado[i].area}</p>
            <p class="tema">${listado[i].tema}</p>
        </div>
        <div class="data">
            <div class="tags">
                <p class="numero">${listado[i].numero}  <a href="${listado[i].enlace}"><i class="fa-solid fa-arrow-up-right-from-square"></i></a></p>
                <p class="fecha">${listado[i].fecha}</p>
                <p class="avance ${color}">${listado[i].estado}</p>
            </div>
            <div class="resumen">
                <p>${listado[i].resumen}</p>  
            </div>
        </div>
        `;

    i++;
    contenedorProyectos.appendChild(card);
  }
  const mostrarMenos = document.createElement("p");
  mostrarMenos.textContent = "Mostrar menos";
  mostrarMenos.classList.add("ancor");
  contenedorProyectos.appendChild(mostrarMenos);

  mostrarMenos.addEventListener("click", () => {
    mostrarMenos.remove();
    mostrarMenosProyectos(listado);
  });
}

function mostrarMenosProyectos(listado) {
  let i = listado.length;

  while (i > 8) {
    contenedorProyectos.lastChild.remove();
    i--;
  }

  const mostrarMas = document.createElement("p");
  mostrarMas.textContent = "Mostrar más";
  mostrarMas.classList.add("ancor");
  contenedorProyectos.appendChild(mostrarMas);
  contenedorProyectos.scrollIntoView({ behavior: "smooth" });

  mostrarMas.addEventListener("click", () => {
    mostrarMas.remove();
    mostrarMasProyectos(listado);
  });
}

// completa el select del filtro
const temasProyectos = proyectosPropios.map((proy) => proy.tema);
function completarTemas() {
  const temas = [...new Set(temasProyectos)];
  const select = document.querySelector("#temas");
  temas.forEach((element) => {
    const op = document.createElement("option");
    op.setAttribute("value", element);
    op.textContent = element.toUpperCase();
    select.appendChild(op);
  });
}
completarTemas();

function imprimirDestacados() {
  for (let i = 0; i < destacados.length; i++) {
    document.querySelector(`#card_${i + 1} .card__numero`).innerText =
      destacados[i].numero;
    document.querySelector(`#card_${i + 1} .card__titulo`).innerText =
      destacados[i].tema;
    document.querySelector(`#card_${i + 1} .area`).innerText =
      destacados[i].area;
    document.querySelector(`#card_${i + 1} .fecha`).innerText =
      destacados[i].fecha;
    document.querySelector(`#card_${i + 1} .texto`).innerText =
      destacados[i].resumen;
    document.querySelector(`#card_${i + 1} .estado`).innerText =
      destacados[i].estado;
  }
}
